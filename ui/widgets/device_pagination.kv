#:kivy 2.3.0
#:import dp kivy.metrics.dp

<DevicePagination@BoxLayout>:
    size_hint_y: None
    height: dp(50)
    orientation: 'horizontal'
    padding: dp(66), dp(10)
    spacing: dp(20)
    
    # Properties
    page_text: "Page 1/2"
    current_page: 1
    total_pages: 2
    auto_switch: False
    
    canvas.before:
        Color:
            rgba: 0.08, 0.08, 0.08, 1
        Rectangle:
            pos: self.pos
            size: self.size
        # Top border
        Color:
            rgba: 0.2, 0.2, 0.2, 1
        Line:
            points: [self.x, self.top, self.right, self.top]
            width: 1
    
    # Previous page
    Button:
        text: "◀"
        size_hint: None, None
        size: dp(40), dp(30)
        background_color: (0.15, 0.15, 0.15, 1) if root.current_page > 1 else (0.08, 0.08, 0.08, 1)
        color: (0.7, 0.7, 0.7, 1) if root.current_page > 1 else (0.3, 0.3, 0.3, 1)
        disabled: root.current_page <= 1
        on_release: root.previous_page()
    
    # Page info and controls
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(2)
        
        Label:
            text: root.page_text
            font_size: dp(14)
            color: 1, 1, 1, 1
            size_hint_y: None
            height: dp(18)
        
        # Auto-switch indicator
        BoxLayout:
            size_hint_y: None
            height: dp(12)
            spacing: dp(4)
            
            Label:
                text: "Auto:"
                font_size: dp(8)
                color: 0.6, 0.6, 0.6, 1
                size_hint_x: None
                width: dp(25)
            
            Widget:
                size_hint_x: None
                width: dp(16)
                canvas:
                    Color:
                        rgba: (0.15, 0.5, 1.0, 1) if root.auto_switch else (0.3, 0.3, 0.3, 1)
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(6)]
                    Color:
                        rgba: (1, 1, 1, 1) if root.auto_switch else (0.5, 0.5, 0.5, 1)
                    Ellipse:
                        pos: (self.right - dp(8), self.y + dp(2)) if root.auto_switch else (self.x + dp(2), self.y + dp(2))
                        size: dp(8), dp(8)
                on_touch_down: root.toggle_auto_switch() if self.collide_point(*args[1].pos) else None
    
    # Next page
    Button:
        text: "▶"
        size_hint: None, None
        size: dp(40), dp(30)
        background_color: (0.15, 0.15, 0.15, 1) if root.current_page < root.total_pages else (0.08, 0.08, 0.08, 1)
        color: (0.7, 0.7, 0.7, 1) if root.current_page < root.total_pages else (0.3, 0.3, 0.3, 1)
        disabled: root.current_page >= root.total_pages
        on_release: root.next_page()
