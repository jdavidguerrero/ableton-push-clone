#:kivy 2.3.0
#:import dp kivy.metrics.dp

<TrackSelector@BoxLayout>:
    size_hint_y: None
    height: dp(35)  # REDUCIDO de 50 a 35
    orientation: 'horizontal'
    padding: dp(66), dp(5)  # REDUCIDO padding vertical de 10 a 5
    spacing: dp(10)  # REDUCIDO spacing de 15 a 10
    
    # Properties
    current_track: 0
    current_track_name: "Track 1"
    total_tracks: 8
    
    canvas.before:
        Color:
            rgba: 0.06, 0.06, 0.06, 1
        Rectangle:
            pos: self.pos
            size: self.size
        # Bottom border
        Color:
            rgba: 0.25, 0.25, 0.25, 1
        Line:
            points: [self.x, self.y, self.right, self.y]
            width: 1
    
    # Previous track button - MÁS PEQUEÑO
    Button:
        text: "◀◀"
        size_hint: None, None
        size: dp(35), dp(20)  # REDUCIDO de 50x25 a 35x20
        background_color: (0.15, 0.15, 0.15, 1) if root.current_track > 0 else (0.08, 0.08, 0.08, 1)
        color: (0.7, 0.7, 0.7, 1) if root.current_track > 0 else (0.3, 0.3, 0.3, 1)
        font_size: dp(8)  # REDUCIDO font de 10 a 8
        disabled: root.current_track <= 0
        on_release: app.root.current_screen.previous_track() if hasattr(app.root.current_screen, 'previous_track') else None
    
    # Current track display - MÁS COMPACTO
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(0)  # REDUCIDO spacing de 1 a 0
        
        Label:
            text: "Track"
            font_size: dp(7)  # REDUCIDO de 9 a 7
            color: 0.6, 0.6, 0.6, 1
            size_hint_y: None
            height: dp(8)  # REDUCIDO de 10 a 8
        
        Label:
            text: root.current_track_name
            font_size: dp(12)  # REDUCIDO de 14 a 12
            color: 1, 1, 1, 1
            bold: True
            size_hint_y: None
            height: dp(14)  # REDUCIDO de 16 a 14
    
    # Track color indicator - MÁS PEQUEÑO
    Widget:
        size_hint_x: None
        width: dp(4)  # REDUCIDO de 6 a 4
        canvas:
            Color:
                rgba: (0, 0.016, 1, 1) if root.current_track == 0 else (0, 1, 0.05, 1) if root.current_track == 1 else (1, 0.6, 0, 1)
            RoundedRectangle:
                pos: self.x + dp(1), self.y + dp(6)  # AJUSTADO posición vertical
                size: dp(2), dp(8)  # REDUCIDO de 4x10 a 2x8
                radius: [dp(1)]  # REDUCIDO radius
    
    # Next track button - MÁS PEQUEÑO
    Button:
        text: "▶▶"
        size_hint: None, None
        size: dp(35), dp(20)  # REDUCIDO de 50x25 a 35x20
        background_color: (0.15, 0.15, 0.15, 1) if root.current_track < root.total_tracks - 1 else (0.08, 0.08, 0.08, 1)
        color: (0.7, 0.7, 0.7, 1) if root.current_track < root.total_tracks - 1 else (0.3, 0.3, 0.3, 1)
        font_size: dp(8)  # REDUCIDO font de 10 a 8
        disabled: root.current_track >= root.total_tracks - 1
        on_release: app.root.current_screen.next_track() if hasattr(app.root.current_screen, 'next_track') else None
