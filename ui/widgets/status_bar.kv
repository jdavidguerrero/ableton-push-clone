#:import IconButton ui.widgets.icon_button.IconButton

<StatusBar>:
    orientation: 'horizontal'
    size_hint_y: None
    height: dp(40)  # Taller for better visibility
    padding: [16, 8]
    spacing: 24
    canvas.before:
        Color: 
            rgba: 0.08, 0.08, 0.08, 1  # Darker background
        Rectangle: 
            pos: self.pos 
            size: self.size
        Color: 
            rgba: 0.25, 0.25, 0.25, 1  # More visible border
        Line: 
            rectangle: (*self.pos, *self.size) 
            width: 1

    # Left block (text info)
    BoxLayout:
        size_hint_x: None
        width: scene_label.texture_size[0] + track_label.texture_size[0] + bpm_label.texture_size[0] + 48
        spacing: 24
        Label:
            id: scene_label
            text: root.scene_text
            font_size: dp(14)  # Larger text
            color: 1,1,1,1
            size_hint_x: None
            width: self.texture_size[0]
            halign: 'center'
            valign: 'middle'
        Label:
            id: track_label
            text: root.track_text
            font_size: dp(14)  # Larger text
            color: 1,1,1,1
            size_hint_x: None
            width: self.texture_size[0]
            halign: 'center'
            valign: 'middle'
        Label:
            id: bpm_label
            text: root.bpm_text
            font_size: dp(14)  # Larger text
            color: 1,1,1,1
            size_hint_x: None
            width: self.texture_size[0]
            halign: 'center'
            valign: 'middle'

    # Spacer to push icons to the right
    Widget:

    # Right block (transport icons) - FIXED CENTERING
    BoxLayout:
        size_hint_x: None
        width: dp(32*3 + 12*2)  # 3 icons of 32px with spacing=12
        spacing: dp(12)
        # Remove padding, let BoxLayout center automatically
        
        IconButton:
            id: play_btn
            source: "play.png"  # Remove path - already in resource_add_path
            size_hint: None, None
            size: dp(32), dp(32)  # Larger buttons
            active: True
            on_release: root.on_action('play')
            pos_hint: {'center_y': 0.5}  # Center vertically within parent
            
        IconButton:
            id: record_btn
            source: "record.png"  # Remove path
            size_hint: None, None
            size: dp(32), dp(32)  # Larger buttons
            tint_active: 1, 0.3, 0.3, 1
            pos_hint: {'center_y': 0.5}  # Center vertically within parent
            on_release:
                root.on_action('record')
                self.active = not self.active
                
        IconButton:
            id: loop_btn
            source: "loop.png"  # Remove path
            size_hint: None, None
            size: dp(32), dp(32)  # Larger buttons
            tint_active: 0.3, 1, 1, 1
            pos_hint: {'center_y': 0.5}  # Center vertically within parent
            on_release:
                root.on_action('loop')
                self.active = not self.active
