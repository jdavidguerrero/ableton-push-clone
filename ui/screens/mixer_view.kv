#:kivy 2.3.0
#:import dp kivy.metrics.dp

<MixerViewScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 0
        
        # Screen Header - REDUCED HEIGHT
        ScreenHeader:
            id: screen_header
            title: "Mixer View"
            info: "All Tracks Mixer"
            size_hint_y: None
            height: dp(40)  # Reduced from default
        
        # Main Mixer Area - FULL SCREEN
        ScrollView:
            id: mixer_scroll
            do_scroll_y: False   # Only horizontal scroll
            do_scroll_x: True
            
            BoxLayout:
                id: mixers_container
                orientation: 'horizontal'
                size_hint_x: None
                width: self.minimum_width
                spacing: dp(3)  # Reduced spacing
                padding: dp(8), dp(10)  # Reduced padding
                canvas.before:
                    Color:
                        rgba: 0.05, 0.05, 0.05, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
        
        # Master Section - MUCH SMALLER
        BoxLayout:
            size_hint_y: None
            height: dp(50)  # REDUCED from 80 to 50
            orientation: 'horizontal'
            padding: dp(15), dp(5)  # Reduced padding
            spacing: dp(15)  # Reduced spacing
            canvas.before:
                Color:
                    rgba: 0.12, 0.12, 0.12, 1
                Rectangle:
                    pos: self.pos
                    size: self.size
                Color:
                    rgba: 0.25, 0.25, 0.25, 1
                Line:
                    points: [self.x, self.top, self.right, self.top]
                    width: 1
            
            # Master Volume Label - SMALLER
            Label:
                text: "MASTER"
                size_hint_x: None
                width: dp(60)  # Reduced from 80
                font_size: dp(12)  # Reduced font
                bold: True
                color: 0.9, 0.9, 0.9, 1
                halign: 'center'
                valign: 'middle'
            
            # Master Volume Slider - MUCH SMALLER
            BoxLayout:
                orientation: 'horizontal'  # Changed to horizontal
                spacing: dp(8)
                
                Slider:
                    id: master_volume
                    min: 0
                    max: 1
                    value: 0.8
                    size_hint_y: None
                    height: dp(20)  # Much smaller
                    
                Label:
                    text: f"{int(master_volume.value * 100)}%"
                    size_hint_x: None
                    width: dp(40)  # Fixed width
                    font_size: dp(10)  # Smaller font
                    color: 0.8, 0.8, 0.8, 1
                    halign: 'center'
                    valign: 'middle'
            
            # BPM Display - SMALLER
            BoxLayout:
                size_hint_x: None
                width: dp(80)  # Reduced from 120
                orientation: 'horizontal'
                spacing: dp(5)
                
                Label:
                    text: "BPM:"
                    font_size: dp(10)  # Smaller
                    color: 0.7, 0.7, 0.7, 1
                    halign: 'center'
                    valign: 'middle'
                    size_hint_x: None
                    width: dp(35)
                
                Label:
                    text: "120.0"
                    font_size: dp(14)  # Smaller
                    bold: True
                    color: 1, 1, 1, 1
                    halign: 'center'
                    valign: 'middle'
                    size_hint_x: None
                    width: dp(40)
        
        # Navigation Bar
        NavigationBar:
            selected_index: 1  # Mixer will be index 1 (after Clip View)