#:kivy 2.3.0
#:import dp kivy.metrics.dp

<ClipViewScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 0
        
        # Screen Header 
        ScreenHeader:
            id: screen_header
            title: "Clip View"
            info: "Scene 1 / Track 1"
        
        # Main Grid Area (clips) - FIXED: Show 8 tracks, scroll for more
        BoxLayout:
            orientation: 'horizontal'
            
            # Left spacer - centers the 8-track viewport
            Widget:
            
            # Fixed viewport for exactly 8 tracks
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: None
                width: dp(704)  # Exactly 8 tracks * 88px each
                
                # Top spacer for vertical centering
                Widget:
                    size_hint_y: 0.2
                
                # ScrollView with fixed size for 8 tracks
                ScrollView:
                    size_hint_y: None
                    height: dp(270)  # ClipGrid height
                    do_scroll_y: False
                    do_scroll_x: True
                    
                    ClipGrid:
                        id: clip_grid
                        size_hint_x: None
                        # ClipGrid width will expand based on number of tracks
                
                # Bottom spacer for vertical centering
                Widget:
                    size_hint_y: 0.2
            
            # Right spacer - centers the 8-track viewport
            Widget:
        
        # Status Bar 
        StatusBar:
            scene_text: "Scene 1"
            track_text: root.current_track_text
            bpm_text: "BPM: 120"
        
        # Navigation Bar - ensure it has enough space
        NavigationBar:
            selected_index: 0