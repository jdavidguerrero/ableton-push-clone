#:kivy 2.3.0
#:import dp kivy.metrics.dp

<ClipViewScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 0
        
        # Screen Header 
        ScreenHeader:
            id: screen_header
            title: "Clip View"
            info: "Scene 1 / Track 1"
        
        # Main content area
        BoxLayout:
            orientation: 'horizontal'
            
            # Left spacer
            Widget:
            
            # Content container
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: None
                width: dp(704)
                
                # Top spacer
                Widget:
                    size_hint_y: None
                    height: dp(10)
                
                # Track Headers - FIXED
                BoxLayout:
                    size_hint_y: None
                    height: dp(40)  # Slightly taller
                    canvas.before:
                        Color:
                            rgba: 0.1, 0.1, 0.1, 1
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    
                    ScrollView:
                        id: headers_scroll
                        do_scroll_y: False
                        do_scroll_x: True
                        
                        BoxLayout:
                            id: track_headers_container
                            orientation: 'horizontal'
                            size_hint_x: None
                            width: self.minimum_width
                            spacing: 0
                
                # Clips ScrollView - FULL HEIGHT NOW
                ScrollView:
                    id: content_scroll
                    do_scroll_y: True   # Vertical scroll for scenes
                    do_scroll_x: True   # Horizontal scroll for tracks
                    on_scroll_x: root._sync_header_scroll(self.scroll_x)
                    
                    BoxLayout:
                        id: clips_container
                        orientation: 'horizontal'
                        size_hint_x: None
                        width: self.minimum_width
                        size_hint_y: None
                        height: dp(240)  # Fixed height for 12 scenes
                
                # Bottom spacer
                Widget:
                    size_hint_y: None
                    height: dp(10)
            
            # Right spacer
            Widget:
        
        # Status Bar 
        StatusBar:
            scene_text: "Scene 1"
            track_text: root.current_track_text
            bpm_text: "BPM: 120"
        
        # Navigation Bar
        NavigationBar:
            selected_index: 0