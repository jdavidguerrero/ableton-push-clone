#:kivy 2.3.0
#:import dp kivy.metrics.dp

<NoteViewScreen>:
    BoxLayout:
        orientation: 'vertical'
        spacing: 0
        
        # Screen Header
        ScreenHeader:
            id: screen_header
            title: "Note View"
            info: "Info: Scene 3 / Track 2"
        
        # Controls Row - MUCH SMALLER
        BoxLayout:
            size_hint_y: None
            height: dp(38)  # Reduced from 50 to 38
            orientation: 'horizontal'
            padding: dp(48), dp(2)  # Minimal padding
            spacing: dp(10)  # Tighter spacing
            
            # Scale Selector Button - MUCH SMALLER
            Button:
                id: scale_selector
                text: "Scale: " + root.current_scale
                size_hint: None, None
                size: dp(280), dp(32)  # Reduced height from 40 to 32
                background_normal: ''
                background_color: 0.4, 0.4, 0.4, 1
                font_size: dp(11)  # Smaller font
                bold: True
                color: 1, 1, 1, 1
                on_release: root.cycle_scale()
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(6)]  # Smaller radius
            
            # Root Selector Button - MUCH SMALLER
            Button:
                id: root_selector
                text: "Root: " + root.current_root
                size_hint: None, None
                size: dp(200), dp(32)  # Reduced height
                background_normal: ''
                background_color: 0.4, 0.4, 0.4, 1
                font_size: dp(11)  # Smaller font
                bold: True
                color: 1, 1, 1, 1
                on_release: root.cycle_root()
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(6)]
            
            # Octave Selector - MUCH SMALLER
            BoxLayout:
                id: octave_selector
                size_hint: None, None
                size: dp(140), dp(32)  # Reduced
                orientation: 'horizontal'
                spacing: dp(6)
                
                Button:
                    text: "<"
                    size_hint: None, None
                    size: dp(32), dp(32)  # Square
                    background_normal: ''
                    background_color: 0.3, 0.3, 0.3, 1
                    color: 0.8, 0.8, 0.8, 1
                    font_size: dp(14)
                    bold: True
                    on_release: root.decrease_octave()
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(6)]
                
                Button:
                    text: "OCT" if root.current_octave == 4 else str(root.current_octave)
                    size_hint: None, None
                    size: dp(70), dp(32)  # Smaller
                    background_normal: ''
                    background_color: 0.4, 0.4, 0.4, 1
                    color: 1, 1, 1, 1
                    font_size: dp(11)
                    bold: True
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(6)]
                
                Button:
                    text: ">"
                    size_hint: None, None
                    size: dp(32), dp(32)  # Square
                    background_normal: ''
                    background_color: 0.3, 0.3, 0.3, 1
                    color: 0.8, 0.8, 0.8, 1
                    font_size: dp(14)
                    bold: True
                    on_release: root.increase_octave()
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(6)]
            
            # Mode Toggle Button
            Button:
                text: "üéπ" if root.current_mode == "melodic" else "ü•Å"
                size_hint: None, None
                size: dp(40), dp(32)
                background_normal: ''
                background_color: (0.22, 0.84, 0.43, 1) if root.current_mode == "drum" else (0.15, 0.5, 1.0, 1)
                color: 1, 1, 1, 1
                font_size: dp(16)
                on_release: root.toggle_mode()
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [dp(6)]
        
        # Pad Grid Area - BETTER SIZED
        BoxLayout:
            id: pad_grid
            orientation: 'vertical'
            padding: dp(66), dp(4)  # Better padding
            spacing: dp(6)  # Better spacing
            
            # Row 1
            BoxLayout:
                orientation: 'horizontal'
                spacing: dp(6)
                size_hint_y: None
                height: dp(76)  # Slightly smaller
                
                Button:
                    id: pad_0_0
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)  # Consistent with height
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)  # Slightly smaller font
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 0, self)
                    on_release: root.on_pad_release(0, 0, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(12)]  # Increased from dp(8) to dp(12) for more rounded corners
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(12))  # Match the radius
                            width: dp(1)  # Thinner border
                
                Button:
                    id: pad_0_1
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 1, self)
                    on_release: root.on_pad_release(0, 1, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_2
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 2, self)
                    on_release: root.on_pad_release(0, 2, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_3
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 3, self)
                    on_release: root.on_pad_release(0, 3, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_4
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 4, self)
                    on_release: root.on_pad_release(0, 4, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_5
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 5, self)
                    on_release: root.on_pad_release(0, 5, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_6
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 6, self)
                    on_release: root.on_pad_release(0, 6, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_0_7
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(0, 7, self)
                    on_release: root.on_pad_release(0, 7, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
            
            # Row 2 - WITH ONE ACTIVE PAD
            BoxLayout:
                orientation: 'horizontal'
                spacing: dp(6)
                size_hint_y: None
                height: dp(76)
                
                Button:
                    id: pad_1_0
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.22, 0.84, 0.43, 1  # Green for active pad
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 0, self)
                    on_release: root.on_pad_release(1, 0, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.36, 0.89, 0.51, 1  # Brighter green border for active
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_1
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 1, self)
                    on_release: root.on_pad_release(1, 1, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_2
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 2, self)
                    on_release: root.on_pad_release(1, 2, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_3
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 3, self)
                    on_release: root.on_pad_release(1, 3, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_4
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 4, self)
                    on_release: root.on_pad_release(1, 4, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_5
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 5, self)
                    on_release: root.on_pad_release(1, 5, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_6
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 6, self)
                    on_release: root.on_pad_release(1, 6, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_1_7
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(1, 7, self)
                    on_release: root.on_pad_release(1, 7, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
            
            # Row 3
            BoxLayout:
                orientation: 'horizontal'
                spacing: dp(6)
                size_hint_y: None
                height: dp(76)
                
                Button:
                    id: pad_2_0
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 0, self)
                    on_release: root.on_pad_release(2, 0, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_1
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 1, self)
                    on_release: root.on_pad_release(2, 1, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_2
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 2, self)
                    on_release: root.on_pad_release(2, 2, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_3
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 3, self)
                    on_release: root.on_pad_release(2, 3, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_4
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 4, self)
                    on_release: root.on_pad_release(2, 4, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_5
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 5, self)
                    on_release: root.on_pad_release(2, 5, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_6
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 6, self)
                    on_release: root.on_pad_release(2, 6, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_2_7
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(2, 7, self)
                    on_release: root.on_pad_release(2, 7, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
            
            # Row 4
            BoxLayout:
                orientation: 'horizontal'
                spacing: dp(6)
                size_hint_y: None
                height: dp(76)
                
                Button:
                    id: pad_3_0
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 0, self)
                    on_release: root.on_pad_release(3, 0, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_1
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 1, self)
                    on_release: root.on_pad_release(3, 1, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_2
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 2, self)
                    on_release: root.on_pad_release(3, 2, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_3
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 3, self)
                    on_release: root.on_pad_release(3, 3, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_4
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 4, self)
                    on_release: root.on_pad_release(3, 4, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_5
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 5, self)
                    on_release: root.on_pad_release(3, 5, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_6
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 6, self)
                    on_release: root.on_pad_release(3, 6, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
                
                Button:
                    id: pad_3_7
                    text: "D#1"
                    size_hint: None, None
                    size: dp(76), dp(76)
                    background_normal: ''
                    background_color: 0.13, 0.13, 0.13, 1
                    font_size: dp(15)
                    bold: True
                    color: 1, 1, 1, 1
                    on_press: root.on_pad_press(3, 7, self)
                    on_release: root.on_pad_release(3, 7, self)
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(8)]
                        Color:
                            rgba: 0.33, 0.33, 0.33, 1
                        Line:
                            rounded_rectangle: (*self.pos, *self.size, dp(8))
                            width: dp(1)
        
        # Navigation Bar
        NavigationBar:
            selected_index: 2